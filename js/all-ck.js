//@codekit-append "libs/jquery.ba-bbq.js"
//@codekit-append "libs/jquery.geocomplete.js"
//@codekit-append "global.js"
//@codekit-append "utils/GeoUtil.js
//@codekit-append "utils/DataUtil.js
//@codekit-append "utils/TextUtil.js
//@codekit-append "model/DataProxy.js
//@codekit-append "model/SimpleDataProxy.js
//@codekit-append "model/DataCache.js
//@codekit-append "model/DataLocalStorage.js
//@codekit-append "model/Model.js
//@codekit-append "controller/Controller.js 
//@codekit-append "view/UserLocationControl.js 
//@codekit-append "view/HashNavigator.js
//@codekit-append "view/AutoComplete.js
//@codekit-append "view/InfoWindow.js
//@codekit-append "view/TypeSelector.js
//@codekit-append "view/MarkersImages.js 
//@codekit-append "view/MarkerManager.js 
//@codekit-append "view/Marker.js  
//@codekit-append "view/MarkerGridOverlay.js
//@codekit-append "view/Map.js
//@codekit-append "view/View.js 
//@codekit-append "App.js
//@codekit-append "plugins.js
//@codekit-append "script.js
/* **********************************************
     Begin jquery.ba-bbq.js
********************************************** *//*!
 * jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */// Script: jQuery BBQ: Back Button & Query Library
//
// *Version: 1.2.1, Last updated: 2/17/2010*
// 
// Project Home - http://benalman.com/projects/jquery-bbq-plugin/
// GitHub       - http://github.com/cowboy/jquery-bbq/
// Source       - http://github.com/cowboy/jquery-bbq/raw/master/jquery.ba-bbq.js
// (Minified)   - http://github.com/cowboy/jquery-bbq/raw/master/jquery.ba-bbq.min.js (4.0kb)
// 
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
// 
// Basic AJAX     - http://benalman.com/code/projects/jquery-bbq/examples/fragment-basic/
// Advanced AJAX  - http://benalman.com/code/projects/jquery-bbq/examples/fragment-advanced/
// jQuery UI Tabs - http://benalman.com/code/projects/jquery-bbq/examples/fragment-jquery-ui-tabs/
// Deparam        - http://benalman.com/code/projects/jquery-bbq/examples/deparam/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - 1.3.2, 1.4.1, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.7, Safari 3-4,
//                   Chrome 4-5, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-bbq/unit/
// 
// About: Release History
// 
// 1.2.1 - (2/17/2010) Actually fixed the stale window.location Safari bug from
//         <jQuery hashchange event> in BBQ, which was the main reason for the
//         previous release!
// 1.2   - (2/16/2010) Integrated <jQuery hashchange event> v1.2, which fixes a
//         Safari bug, the event can now be bound before DOM ready, and IE6/7
//         page should no longer scroll when the event is first bound. Also
//         added the <jQuery.param.fragment.noEscape> method, and reworked the
//         <hashchange event (BBQ)> internal "add" method to be compatible with
//         changes made to the jQuery 1.4.2 special events API.
// 1.1.1 - (1/22/2010) Integrated <jQuery hashchange event> v1.1, which fixes an
//         obscure IE8 EmulateIE7 meta tag compatibility mode bug.
// 1.1   - (1/9/2010) Broke out the jQuery BBQ event.special <hashchange event>
//         functionality into a separate plugin for users who want just the
//         basic event & back button support, without all the extra awesomeness
//         that BBQ provides. This plugin will be included as part of jQuery BBQ,
//         but also be available separately. See <jQuery hashchange event>
//         plugin for more information. Also added the <jQuery.bbq.removeState>
//         method and added additional <jQuery.deparam> examples.
// 1.0.3 - (12/2/2009) Fixed an issue in IE 6 where location.search and
//         location.hash would report incorrectly if the hash contained the ?
//         character. Also <jQuery.param.querystring> and <jQuery.param.fragment>
//         will no longer parse params out of a URL that doesn't contain ? or #,
//         respectively.
// 1.0.2 - (10/10/2009) Fixed an issue in IE 6/7 where the hidden IFRAME caused
//         a "This page contains both secure and nonsecure items." warning when
//         used on an https:// page.
// 1.0.1 - (10/7/2009) Fixed an issue in IE 8. Since both "IE7" and "IE8
//         Compatibility View" modes erroneously report that the browser
//         supports the native window.onhashchange event, a slightly more
//         robust test needed to be added.
// 1.0   - (10/2/2009) Initial release
(function(e,t){"$:nomunge";function N(e){return typeof e=="string"}function C(e){var t=r.call(arguments,1);return function(){return e.apply(this,t.concat(r.call(arguments)))}}function k(e){return e.replace(/^[^#]*#?(.*)$/,"$1")}function L(e){return e.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function A(r,o,a,f,l){var c,h,p,d,g;if(f!==n){p=a.match(r?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);g=p[3]||"";if(l===2&&N(f))h=f.replace(r?S:E,"");else{d=u(p[2]);f=N(f)?u[r?m:v](f):f;h=l===2?f:l===1?e.extend({},f,d):e.extend({},d,f);h=s(h);r&&(h=h.replace(x,i))}c=p[1]+(r?"#":h||!p[1]?"?":"")+h+g}else c=o(a!==n?a:t[y][b]);return c}function O(e,t,r){if(t===n||typeof t=="boolean"){r=t;t=s[e?m:v]()}else t=N(t)?t.replace(e?S:E,""):t;return u(t,r)}function M(t,r,i,o){if(!N(i)&&typeof i!="object"){o=i;i=r;r=n}return this.each(function(){var n=e(this),u=r||h()[(this.nodeName||"").toLowerCase()]||"",a=u&&n.attr(u)||"";n.attr(u,s[t](a,i,o))})}var n,r=Array.prototype.slice,i=decodeURIComponent,s=e.param,o,u,a,f=e.bbq=e.bbq||{},l,c,h,p=e.event.special,d="hashchange",v="querystring",m="fragment",g="elemUrlAttr",y="location",b="href",w="src",E=/^.*\?|#.*$/g,S=/^.*\#/,x,T={};s[v]=C(A,0,L);s[m]=o=C(A,1,k);o.noEscape=function(t){t=t||"";var n=e.map(t.split(""),encodeURIComponent);x=new RegExp(n.join("|"),"g")};o.noEscape(",/");e.deparam=u=function(t,r){var s={},o={"true":!0,"false":!1,"null":null};e.each(t.replace(/\+/g," ").split("&"),function(t,u){var a=u.split("="),f=i(a[0]),l,c=s,h=0,p=f.split("]["),d=p.length-1;if(/\[/.test(p[0])&&/\]$/.test(p[d])){p[d]=p[d].replace(/\]$/,"");p=p.shift().split("[").concat(p);d=p.length-1}else d=0;if(a.length===2){l=i(a[1]);r&&(l=l&&!isNaN(l)?+l:l==="undefined"?n:o[l]!==n?o[l]:l);if(d)for(;h<=d;h++){f=p[h]===""?c.length:p[h];c=c[f]=h<d?c[f]||(p[h+1]&&isNaN(p[h+1])?{}:[]):l}else e.isArray(s[f])?s[f].push(l):s[f]!==n?s[f]=[s[f],l]:s[f]=l}else f&&(s[f]=r?n:"")});return s};u[v]=C(O,0);u[m]=a=C(O,1);e[g]||(e[g]=function(t){return e.extend(T,t)})({a:b,base:b,iframe:w,img:w,input:w,form:"action",link:b,script:w});h=e[g];e.fn[v]=C(M,v);e.fn[m]=C(M,m);f.pushState=l=function(e,r){N(e)&&/^#/.test(e)&&r===n&&(r=2);var i=e!==n,s=o(t[y][b],i?e:{},i?r:2);t[y][b]=s+(/#/.test(s)?"":"#")};f.getState=c=function(e,t){return e===n||typeof e=="boolean"?a(e):a(t)[e]};f.removeState=function(t){var r={};if(t!==n){r=c();e.each(e.isArray(t)?t:arguments,function(e,t){delete r[t]})}l(r,2)};p[d]=e.extend(p[d],{add:function(t){function i(e){var t=e[m]=o();e.getState=function(e,r){return e===n||typeof e=="boolean"?u(t,e):u(t,r)[e]};r.apply(this,arguments)}var r;if(e.isFunction(t)){r=t;return i}r=t.handler;t.handler=i}})})(jQuery,this);(function(e,t,n){"$:nomunge";function h(e){e=e||t[s][u];return e.replace(/^[^#]*#?(.*)$/,"$1")}var r,i=e.event.special,s="location",o="hashchange",u="href",a=e.browser,f=document.documentMode,l=a.msie&&(f===n||f<8),c="on"+o in t&&!l;e[o+"Delay"]=100;i[o]=e.extend(i[o],{setup:function(){if(c)return!1;e(r.start)},teardown:function(){if(c)return!1;e(r.stop)}});r=function(){function c(){a=f=function(e){return e};if(l){i=e('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow;f=function(){return h(i.document[s][u])};a=function(e,t){if(e!==t){var n=i.document;n.open().close();n[s].hash="#"+e}};a(h())}}var n={},r,i,a,f;n.start=function(){if(r)return;var n=h();a||c();(function i(){var l=h(),c=f(n);if(l!==n){a(n=l,c);e(t).trigger(o)}else c!==n&&(t[s][u]=t[s][u].replace(/#.*/,"")+"#"+c);r=setTimeout(i,e[o+"Delay"])})()};n.stop=function(){if(!i){r&&clearTimeout(r);r=0}};return n}()})(jQuery,this);(function(e,t,n,r){function u(t,n){this.options=e.extend(!0,{},i,n);this.input=t;this.$input=e(t);this._defaults=i;this._name="geocomplete";this.init()}var i={bounds:!0,country:null,map:!1,details:!1,detailsAttribute:"name",location:!1,mapOptions:{zoom:14,scrollwheel:!1,mapTypeId:"roadmap"},markerOptions:{draggable:!1},maxZoom:16,types:["geocode"]},s="street_address route intersection political country administrative_area_level_1 administrative_area_level_2 administrative_area_level_3 colloquial_area locality sublocality neighborhood premise subpremise postal_code natural_feature airport park point_of_interest post_box street_number floor room lat lng viewport location formatted_address location_type bounds".split(" "),o="id url website vicinity reference name rating international_phone_number icon formatted_phone_number".split(" ");e.extend(u.prototype,{init:function(){this.initMap();this.initMarker();this.initGeocoder();this.initDetails();this.initLocation()},initMap:function(){if(!this.options.map)return;if(typeof this.options.map.setCenter=="function"){this.map=this.options.map;return}this.map=new google.maps.Map(e(this.options.map)[0],this.options.mapOptions)},initMarker:function(){if(!this.map)return;var t=e.extend(this.options.markerOptions,{map:this.map});if(t.disabled)return;this.marker=new google.maps.Marker(t);google.maps.event.addListener(this.marker,"dragend",e.proxy(this.markerDragged,this))},initGeocoder:function(){var t={types:this.options.types,bounds:this.options.bounds===!0?null:this.options.bounds,componentRestrictions:this.options.componentRestrictions};this.options.country&&(t.componentRestrictions={country:this.options.country});this.autocomplete=new google.maps.places.Autocomplete(this.input,t);this.geocoder=new google.maps.Geocoder;this.map&&this.options.bounds===!0&&this.autocomplete.bindTo("bounds",this.map);google.maps.event.addListener(this.autocomplete,"place_changed",e.proxy(this.placeChanged,this));this.$input.keypress(function(e){if(e.keyCode===13)return!1});this.$input.bind("geocode",e.proxy(function(){this.find()},this))},initDetails:function(){function i(e){r[e]=t.find("["+n+"="+e+"]")}if(!this.options.details)return;var t=e(this.options.details),n=this.options.detailsAttribute,r={};e.each(s,function(e,t){i(t);i(t+"_short")});e.each(o,function(e,t){i(t)});this.$details=t;this.details=r},initLocation:function(){var e=this.options.location,t;if(!e)return;if(typeof e=="string"){this.find(e);return}e instanceof Array&&(t=new google.maps.LatLng(e[0],e[1]));e instanceof google.maps.LatLng&&(t=e);t&&this.map&&this.map.setCenter(t)},find:function(e){this.geocode({address:e||this.$input.val()})},geocode:function(t){this.options.bounds&&!t.bounds&&(this.options.bounds===!0?t.bounds=this.map&&this.map.getBounds():t.bounds=this.options.bounds);this.options.country&&(t.region=this.options.country);this.geocoder.geocode(t,e.proxy(this.handleGeocode,this))},handleGeocode:function(e,t){if(t===google.maps.GeocoderStatus.OK){var n=e[0];this.$input.val(n.formatted_address);this.update(n);e.length>1&&this.trigger("geocode:multiple",e)}else this.trigger("geocode:error",t)},trigger:function(e,t){this.$input.trigger(e,[t])},center:function(e){if(e.viewport){this.map.fitBounds(e.viewport);this.map.getZoom()>this.options.maxZoom&&this.map.setZoom(this.options.maxZoom)}else{this.map.setZoom(this.options.maxZoom);this.map.setCenter(e.location)}if(this.marker){this.marker.setPosition(e.location);this.marker.setAnimation(this.options.markerOptions.animation)}},update:function(e){this.map&&this.center(e.geometry);this.$details&&this.fillDetails(e);this.trigger("geocode:result",e)},fillDetails:function(t){var n={},r=t.geometry,i=r.viewport,s=r.bounds;e.each(t.address_components,function(e,t){var r=t.types[0];n[r]=t.long_name;n[r+"_short"]=t.short_name});e.each(o,function(e,r){n[r]=t[r]});e.extend(n,{formatted_address:t.formatted_address,location_type:r.location_type||"PLACES",viewport:i,bounds:s,location:r.location,lat:r.location.lat(),lng:r.location.lng()});e.each(this.details,e.proxy(function(e,t){var r=n[e];this.setDetail(t,r)},this));this.data=n},setDetail:function(e,t){t===r?t="":typeof t.toUrlValue=="function"&&(t=t.toUrlValue());e.is(":input")?e.val(t):e.text(t)},markerDragged:function(e){this.trigger("geocode:dragged",e.latLng)},resetMarker:function(){this.marker.setPosition(this.data.location);this.setDetail(this.details.lat,this.data.location.lat());this.setDetail(this.details.lng,this.data.location.lng())},placeChanged:function(){var e=this.autocomplete.getPlace();e.geometry?this.update(e):this.find(e.name)}});e.fn.geocomplete=function(t){var n="plugin_geocomplete";if(typeof t=="string"){var r=e(this).data(n)||e(this).geocomplete().data(n),i=r[t];if(typeof i=="function"){i.apply(r,Array.prototype.slice.call(arguments,1));return e(this)}arguments.length==2&&(i=arguments[1]);return i}return this.each(function(){var r=e.data(this,n);if(!r){r=new u(this,t);e.data(this,n,r)}})}})(jQuery,window,document);var ScukMap={};ScukMap.model={};ScukMap.view={};ScukMap.controller={};ScukMap.utils={};ScukMap.utils.GeoUtil={geocodeAddress:function(e,t,n){var r=new google.maps.Geocoder;r.geocode({address:e,region:n},function(e,n){n==google.maps.GeocoderStatus.OK?t(e[0].geometry.location):log("Geocode was not successful for the following reason: "+n)})},decodeAddress:function(e,t,n){var r=new google.maps.Geocoder;r.geocode({location:e,region:n},function(e,n){n==google.maps.GeocoderStatus.OK?t(e[0].formatted_address):log("Geocode was not successful for the following reason: "+n)})},getGeolocation:function(e,t,n){function r(r){if(n){var i=r.coords.accuracy;log("accuracy: ",i);i>n&&t.apply(this,["Accuracy too poor."])}ScukMap.utils.GeoUtil.handleGeolocationSuccess(e,r)}function i(e){ScukMap.utils.GeoUtil.handleGeolocationError(t,e)}navigator.geolocation?navigator.geolocation.getCurrentPosition(r,i):t.apply(this,["Geolocation is not supported by this browser."])},handleGeolocationSuccess:function(e,t){e.apply(this,[t])},handleGeolocationError:function(e,t){var n="";switch(t.code){case t.PERMISSION_DENIED:n="User denied the request for Geolocation.";break;case t.POSITION_UNAVAILABLE:n="Location information is unavailable.";break;case t.TIMEOUT:n="The request to get user location timed out.";break;case t.UNKNOWN_ERROR:n="An unknown error occurred."}e.apply(this,[n])},pointToTile:function(e,t,n){var r=256,i=e.getProjection(),s=i.fromLatLngToPoint(t),o=new google.maps.Point(s.x*Math.pow(2,n),s.y*Math.pow(2,n)),u=new google.maps.Point(Math.floor(o.x/r),Math.floor(o.y/r));return u},latlngToPx:function(e,t){var n=e.getProjection();return n.fromLatLngToContainerPixel(t)}};ScukMap.utils.DataUtil={parseMarkerType:function(e){var t=[],n=e.split(";"),r=n.length;for(var i=0;i<r;i++){var s=n[i],o=s.split(":")[0];t.push(o)}return t}};ScukMap.utils.TextUtil={add3dots:function(e,t,n){return e.length>n?e.substr(0,n)+t:e},removeCountry:function(e,t){var n=e.indexOf(t);return n>-1?e.substr(0,n):e}};ScukMap.model.DataProxy=function(){this.dataCache=new ScukMap.model.DataCache};ScukMap.model.DataProxy.prototype={init:function(){this.dataCache.init()},getData:function(e,t,n,r,i){var s=this,o=[],u=[];$.each(i,function(e,t){var n=s.dataCache.get(t.x,t.y,0);log("tileFromCache",n);typeof n=="undefined"||n===null?o.push(t):u=u.concat(n)});if(o.length>0){function a(t){s.returnData(e,u,t)}this.getDataFromServer(a,n,o)}else this.returnData(e,u)},getDataFromServer:function(e,t,n){var r=this;$.ajax({url:"php/getDataByTiles.php",type:"POST",data:{zoomLevel:t,tiles:n},success:function(t){var n=$.parseJSON(t),i=[];$.each(n,function(e,t){i=i.concat(t);var n=e.split("-"),s=parseInt(n[0]),o=parseInt(n[1]);r.dataCache.store(t,s,o,0)});e.apply(this,[i])}})},returnData:function(e,t,n){var r=[];r=r.concat(t);r=r.concat(n);var i=n?n.length:0,s=t?t.length:0;log("numTilesFromServer",i,"numTilesFromCache",s);log(r);e.apply(this,[r])}};var dummyData=[{point:[-0.3748799999999619,39.4779237],web:"http://www.amorino.com/",level:1,score:4,description:"Mezinárodní síť zmrzlináren s heslem „Zmrzliny bez barviv, bio vejce, čerstvé mléko, vybrané ovoce“. \r\nOtevřeno 12–23:30, ceny od 3,50 eur za porci. Zmrzlinu si můžete vzít i domů v boxu.",title:"Amorino",url:"/d/amorino/",address:"Plaza San Lorenzo, 2, Valencia, Španělsko",type:"3:kavarny:Kavárny;8:cukrarny:Cukrárny",satisfaction:1},{point:[2.1780400999999756,41.3850193],web:"http://www.grandhotelcentral.com/",level:1,score:5,description:"Podnik po gastronomické stránce vede španělská kulinářská hvězda Ramon Freixa, držitel dvou hvězdiček od Michelina ve svém Madridském podniku. V Avalonu se zaměřil na moderní interpretaci tradiční katalánské kuchyně.",title:"Avalon",url:"/d/avalon/",address:"P/Gallifa, 3, Barcelona, Španělsko",type:"1:restaurace:Restaurace",satisfaction:1},{point:[14.45023649999996,50.1057984],web:"http://www.avion58.cz/",level:1,score:3,description:"Restaurace zaměřená na českou i mezinárodní kuchyni sídlí v rozlehlých prostorách bývalého pivovaru. ",title:"Avion 58",url:"/d/avion-58-1691/",address:"Komunardů, 42, Praha, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[14.432173199999966,50.0983633],web:"http://www.facebook.com/Bistro8",level:1,score:3,description:"Podnik zaměřený na jednoduchou domácí kuchyni. Otevřeno (ve všední dny) od snídaně do večeře.  ",title:"Bistro 8",url:"/d/bistro-8/",address:"Veverkova, 8, Praha, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[3.2295199999999795,51.2044033],web:"http://www.booksandbrunch.be/",level:1,score:0,description:"Vzdušná a klidná kavárna v klidnější části Brugg a přitom kousek od centrálního náměstí, s nabídkou snídaní, salátů, sendvičů. Největší devizou je spojení s knihkupectvím z druhé ruky – knihy jsou téměř všude, k dispozici ke koupi i jen tak k listování u kávy. ",title:"Books & Brunch",url:"/d/books-brunch/",address:"Garenmarkt, 30, Brugge, Belgie",type:"3:kavarny:Kavárny",satisfaction:1},{point:[-0.09081036085206051,51.50565671406849],web:"http://www.boroughmarket.org.uk/",level:1,score:4,description:"Vyhlášený londýnský trh s delikatesami všeho druhu, velká část z nich z lokálních britských zdrojů. Velkou část zabírají stánky s teplým jídlem od burgerů přes těstoviny po curry. Otevřeno čtvrtek, pátek, sobota.",title:"Borough market",url:"/d/borough-market/",address:"Southwark street, 8, London, Velká Británie",type:"1:restaurace:Restaurace;2:pekarny:Pekárny;3:kavarny:Kavárny;4:maso:Maso;5:ovozel:Ovozel;6:lahudky:Lahůdky;7:napoje:Nápoje;8:cukrarny:Cukrárny;9:farmy:Farmy;11:ryby:Ryby",satisfaction:1},{point:[-0.13354470000001584,51.511983],web:"http://www.bubbleology.co.uk/",level:1,score:4,description:"Název říká vše podstatné – barevný bubble tea podnik s možností posezení v gastronomicky nabitém Soho.",title:"Bubbleology (Soho)",url:"/d/bubbleology-soho/",address:"Rupert Street, 49, London, Velká Británie",type:"7:napoje:Nápoje",satisfaction:1},{point:[8.682127,50.110922],web:"http://www.cafe-extrablatt.com/",level:1,score:4,description:"Restaurace blízko frankfurtské univerzity a také kousek od centra, která nabízí hamburgery, pizzy, saláty, polévky a další dobroty. Vyplatí se ale zajít I na snídani, která láká svojí rozmanitostí a příznivou cenou.",title:"Cafe Extrablatt",url:"/d/cafe-extrablatt/",address:"Rheiner strasse, 2, Frankfurt, Německo",type:"1:restaurace:Restaurace",satisfaction:1},{point:[37.60486949999995,55.7636553],web:"http://www.cafe-pushkin.ru/",level:2,score:3,description:"Tradiční ruská kuchyně v aristokratickém prostředí.",title:"Cafe Pushkin",url:"/d/cafe-pushkin/",address:"Tverskoy bul'var, 26A, Moskva, Rusko",type:"1:restaurace:Restaurace",satisfaction:1},{point:[6.665824269836435,43.20875055374755],web:"http://www.chezcamille.fr/",level:1,score:4,description:"Restaurace nabízí jednoduše upravené ryby a je vyhlášená hlavně kvůli bouillabaisse.",title:"Chez Camille",url:"/d/chez-camille/",address:"quartier de Bonne Terrasse, Ramatuelle, Francie",type:"1:restaurace:Restaurace",satisfaction:1},{point:[14.434301799999957,50.0755258],web:"http://www.chocolovescoffee.cz/",level:1,score:3,description:"Čokoládovna s nabídkou tabulkových čokolád, pralinek, horké čokolády i kávy. ",title:"Choco Loves Coffee",url:"/d/choco-loves-coffee/",address:"Jugoslávská, 27, Praha, Česká republika",type:"3:kavarny:Kavárny;8:cukrarny:Cukrárny",satisfaction:1},{point:[14.433055100000047,50.1024247],web:"http://www.chocoloco.cz/",level:1,score:3,description:"Kavárna a čokoládovna s možností malého občerstvení. ",title:"Choco loco",url:"/d/choco-loco/",address:"Dukelských hrdinů, 42, Praha, Česká republika",type:"3:kavarny:Kavárny;8:cukrarny:Cukrárny",satisfaction:1},{point:[2.1813121999999794,41.3885985],web:"http://www.comerc24.com/",level:2,score:5,description:"Kreativně připravené pokrmy moderní kuchyně zde můžete ochutnat formou malých porcí v mnohachodových menu. Restaurace patří Carlesu Abellanovi, který dlouhé roky strávil v týmu slavného kuchařského čaroděje jménem Ferran Adrià. Comerç 24 má hvězdičku od Michelina.",title:"Comerç 24",url:"/d/comerc-24/",address:"Carrer comerç, 24, Barcelona, Španělsko",type:"1:restaurace:Restaurace",satisfaction:1},{point:[19.936360499999978,50.0605063],web:"http://www.cupcakecorner.pl/",level:1,score:0,description:"Cukrárna se zaměřením na americké cupcakes.",title:"Cupcake Corner",url:"/d/cupcake-corner/",address:"Bracka, 4, Kraków, Polsko",type:"8:cukrarny:Cukrárny",satisfaction:1},{point:[16.56137369999999,49.1648924],web:"http://www.restaurant-dtj.cz/o-nas/",level:1,score:0,description:"Nekuřácká restaurace s moderním a jednoduchým designem.  To samé i na talíři. Příjemným zpestřením může být i dětský koutek a sousedící taneční škola..",title:"DTJ CLUB GARDA - restaurace",url:"/d/dtj-club-garda-restaurace/",address:"Klobásova, 34, Brno, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[15.82543510000005,50.21182289999999],web:"http://www.dobracajovnahk.cz/",level:1,score:4,description:"Hradecký zástupce řetězce Dobrých čajoven. Tradiční průřez černými, zelenými, bílými a červenými čaji a pár nečaji z různých čajových oblastí. Prodej čajů na váhu a velký výběr čajové keramiky a doplňků.\r\n",title:"Dobrá čajovna Hradec Králové",url:"/d/dobra-cajovna-hradec-kralove/",address:"Masarykovo náměstí, 396, Hradec Králové, Česká republika",type:"7:napoje:Nápoje",satisfaction:1},{point:[14.450519100000065,50.01685370000001],web:"http://www.akademie.domyno.cz/sportbar/sportbar/",level:0,score:3,description:"Restaurace vyprofilovaná čistě jen na hambugery a několik doplňků k nim (hranolky, cibulové kroužky, salát coleslaw).  ",title:"Domyno Burger",url:"/d/domyno-burger/",address:"Novodvorská, 1010/14, Praha, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[13.403804100000002,52.5259436],web:"http://www.dospalillos.com/",level:2,score:4,description:"Kosmopolitní kombinace: Podnik, který najdete v Barceloně a Berlíně, podává tapas v asijském stylu a designovali ho Francouzi. Kuchyni šéfuje Albert Raurich, šéfkuchař s několikaletou zkušeností z El Bulli. [Článek v New York Times včetně fotografií >](http://travel.nytimes.com/2010/04/18/travel/18Berlin.html)",title:"Dos Palillos (Berlín)",url:"/d/dos-palillos-berlin/",address:"Weinmeisterstraße, 1, Berlín, Německo",type:"1:restaurace:Restaurace",satisfaction:1},{point:[15.573728500000016,49.6025384],web:"http://www.stateklesolg.cz/",level:1,score:3,description:"Ovoce a zelenina ze statku Lesolg v Rozsochatci, mléčné výrobky z Vysočiny, med a moravské víno. ",title:"Farmářský obchod ",url:"/d/farmarsky-obchod/",address:"Humpolecká, 1399, Havlíčkův Brod, Česká republika",type:"5:ovozel:Ovozel;9:farmy:Farmy",satisfaction:1},{point:[13.438369999999964,52.49346999999999],web:"http://www.fiveelephant.com/",level:1,score:4,description:"Pražírna a kavárna přímo v Kreuzbergu. Příjemné posezení s výhledem na pražičku a celý provoz pražírny. Výběrová káva na espressu i alternativních metodách plus domácí dorty.",title:"Five Elephant",url:"/d/five-elephant/",address:"Reichenberger strasse, 101, Berlín, Německo",type:"3:kavarny:Kavárny",satisfaction:1},{point:[-0.1347613000000365,51.513634],web:"http://Www.flatwhitecafe.com/",level:1,score:4,description:"Protinožská kavárna uprostřed Soho, podávající na espressu (vlastní blend nebo single origin ze Square mile coffee roasters) založené nápoje včetně eponymní australské speciality. Nabídka snídaní a lehkých sendvičů či salátů. ",title:"Flat White",url:"/d/flat-white/",address:"Berwick street, 17, London, Velká Británie",type:"3:kavarny:Kavárny",satisfaction:1},{point:[10.788209999999935,49.33644],web:"http://www.goldener-stern-heilsbronn.de/",level:0,score:4,description:"Rodinný podnik s restaurací a ubytováním. Sezónní a krátký jídelníček, který se denně obměňuje.",title:"Gasthof Goldener Stern",url:"/d/gasthof-goldener-stern/",address:"Ansbacher strasse, 3, Heilsbronn, Německo",type:"1:restaurace:Restaurace",satisfaction:1},{point:[16.603317999999945,49.1893695],web:"http://www.restaurant-glamour.cz/cz/o-restauraci/",level:1,score:3,description:"Restaurace ve stylu Glamour –  čisté linie v prostoru i na talíři.",title:"Glamour ",url:"/d/glamour/",address:"Hybešova, 30, Brno, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[11.24827439866408,46.74491866607812],web:"http://www.gompmalm.it/",level:1,score:4,description:"Salaš ukrytá v alpských lesích. Nabízí nápoje, jídla, pro děti zoo-koutek.",title:"Gompm Alm",url:"/d/gompm-alm/",address:"Obertall, 19, Schenna, Itálie",type:"1:restaurace:Restaurace",satisfaction:1},{point:[17.284652100000017,48.2525004],web:"http://www.gurmanskygrob.sk/",level:1,score:4,description:"Restaurace se nachází na úpatí Malých Karpat v obci Slovenský Grob, kousek od Bratislavy . Její specializací (a prakticky jedinou hlavní ingrediencí) je tradiční husa, včetně dalších husích produktů. ",title:"Gurmánsky Grob",url:"/d/gurmansky-grob/",address:"Chorvátska, 41, Slovenský Grob, Slovensko",type:"1:restaurace:Restaurace",satisfaction:1},{point:[4.2741803999999775,52.1072008],web:"http://www.facebook.com/hetdagelijksbrood",level:1,score:4,description:"Kavárna otevřená od rána do půl třetí odpoledne, s obměňovanou nabídkou domácího chleba i koláčů a silným zastoupením bio surovin. Denní specialitou jsou nejrůznější broodjes (obložené chleby) od toastů po croque monsieur. ",title:"Het Dagelijks Brood",url:"/d/het-dagelijks-brood/",address:"Wassenaarsestraat, 86, Den Haag, Nizozemsko",type:"3:kavarny:Kavárny",satisfaction:1},{point:[13.151750900000025,49.2799583],web:"http://www.plzen-info.cz/firma/zemanka/",level:0,score:3,description:"Rodinná hospůdka s romantickou letní zahrádkou u hlavního tahu na Šumavu. Svérázný majitel vás během čekání na jídlo donutí vyluštit hlavolam. Podávají se hlavně smažené minutky a jedna čerstvá denní hotovka.",title:"Hospůdka Zemanka",url:"/d/hospudka-zemanka/",address:"Milence, 33, Nýrsko, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[14.081063500000027,50.2300469],web:"http://www.bagelcafe.cz/",level:1,score:3,description:"Útulná restaurace má v nabídce nejen domácí bagely, ale i steaky, ryby a další jídla dle denní nabídky. Na třetí pípě protáčejí piva ze zajímavých pivovarů, zmrzlinu berou z 2AD, kávu od Segafreda.",title:"Hugo Bagel Café",url:"/d/hugo-bagel-cafe/",address:"Wilsonova, 585, Slaný, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[14.41614549999997,50.0735818],web:"http://www.facebook.com/pages/I-Need-Coffee/326274637406146",level:1,score:3,description:"Kavárna s možností malého občerstvení.",title:"I need coffee",url:"/d/i-need-coffee/",address:"Na Moráni, 7, Praha, Česká republika",type:"3:kavarny:Kavárny",satisfaction:1},{point:[16.609693900000025,49.1924007],web:"http://www.ilmercato.cz/",level:1,score:5,description:"Nová italská restaurace přímo v centru Brna, pod vedením šéfkuchaře Riccarda Lucqueho.",title:"Il Mercato",url:"/d/il-mercato/",address:"Zelný trh, 2, Brno, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[16.60866229999999,49.1970272],web:"http://www.restauracejakoby.cz/",level:1,score:3,description:"Restaurace a pivní bar s moderním designem. V menu jsou přehledně označena jídla pro vegetariány, nabízí se i bezlepkové pokrmy. ",title:"Jakoby",url:"/d/jakoby/",address:"Jakubské náměstí, 128/6, Brno, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[2.3426604999999654,48.8455178],web:"http://www.kokonorrestaurant.com/",level:1,score:4,description:"Tibetská restaurace nacházející se nedaleko Lucemburských zahrad nabízí pestrou nabídku tibetských pokrmů i nápojů za příznivé ceny (na pařížské poměry).",title:"Kokonor Restaurant Tibétain",url:"/d/kokonor-restaurant-tibetain/",address:"Rue Saint-Jacques, 206, Paris, Francie",type:"1:restaurace:Restaurace",satisfaction:1},{point:[14.429635200000007,50.0901546],web:"http://www.laboca.cz/",level:1,score:4,description:"Kuchyně v hispánském stylu, pěkný výběr tapas, příjemný interiér.",title:"La Boca",url:"/d/la-boca/",address:"Truhlářská, 1114/10, Praha 1, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[15.818741000000045,50.2136664],web:"http://www.laformaggeria.cz/",level:1,score:3,description:"Hradecká prodejna moravské sýrárny Orrero se signální značkou Gran Moravia, sídlící příhodně v centru v OC Atrium. Českou alternativu sýra grana padano a další vlastní produkty sýrárny doplňují v nabídce italské i jiné sýry a uzeniny, těstoviny, vína, oleje či octy.\r\n",title:"La Formaggeria Hradec Králové",url:"/d/la-formaggeria-hradec-kralove/",address:"Dukelská třída, 1713, Hradec Králové, Česká republika",type:"6:lahudky:Lahůdky",satisfaction:1},{point:[14.40910370000006,50.0786058],web:"http://www.laterrassa.cz/",level:2,score:4,description:"Restaurace na Dětském ostrově v Praze specializovaná na tapas a španělskou kuchyni.",title:"La Terrassa",url:"/d/la-terrassa/",address:"Janáčkovo nábřeží - Dětský ostrov, Praha 5, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[13.414326599999981,50.46198889999999],web:"http://www.hawelka.cz/",level:1,score:3,description:"Kavárna nabízející výběrovou kávu připravenou jak jako espresso, tak alternativními způsoby. ",title:"Lagarto Café",url:"/d/lagarto-cafe/",address:"Farského, 4732, Chomutov, Česká republika",type:"3:kavarny:Kavárny;8:cukrarny:Cukrárny",satisfaction:1},{point:[2.337961500000006,48.8857237],web:"",level:1,score:5,description:"V Le Relais de la Butte, která se nachází na svahu Montmartru si můžete posedět u kávy, vína či něčeho dobrého k snědku a kochat se výhledem na Paříž i na samotný Montmartre",title:"Le Relais de la Butte",url:"/d/le-relais-de-la-butte/",address:"Rue Ravignan, 12, Paříž, Francie",type:"1:restaurace:Restaurace;3:kavarny:Kavárny",satisfaction:1},{point:[13.417012800000066,52.4918395],web:"http://www.littleotik.de/",level:1,score:4,description:"Sympatický Otesánek, který se do Kreuzbergu zatoutal spolu s dvěma šikovnými Američany z Detroitu. Otevřeno mají jen od středy do soboty na oběd nebo večeři. Vaří se sezónně, jednoduše a tak jak to u nás moc neznáme. U Otíka zažijete novou vlnu americké kuchyně skříženou s místními vlivy z divokého Kreuzbergu. \r\n\r\nI když se tu hodně rozšoupnete (tři chody, víno, koktejly), pořád se s účtem vejdete pod 50 euro za osobu. Pozor — rezervace a přesná kontrola otvíračky je absolutně nutná!",title:"Little Otik",url:"/d/little-otik/",address:"Graefestraße, 71, Berlín, Německo",type:"1:restaurace:Restaurace",satisfaction:1},{point:[7.127487999999971,43.580858],web:"",level:1,score:3,description:"Tržnice se zeleninou, sýry, uzeninami a dalšími lokálními produkty.",title:"Marché Provençal",url:"/d/marche-provencal/",address:"Cours Masséna, Antibes, Francie",type:"5:ovozel:Ovozel;6:lahudky:Lahůdky",satisfaction:1},{point:[12.70192309999993,49.9664771],web:"http://www.medite.cz/",level:1,score:4,description:"Středomořsky zaměřená restaurace s jídly podávanými formou španělských tapas. Kvalitní originální suroviny, mořské ryby a potvory. V regionu momentálně těžko najdete něco srovnatelného."
,title:"Medité",url:"/d/medite/",address:"Hlavní, 279/7, Mariánské Lázně, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[-71.58994474977112,-33.031336496032765],web:"",level:0,score:4,description:"Místní trh s produkty moře vylovenými brzy ráno. Nejvíc rušno je v sobotu, kdy množství lidí, rybářů a hladových pelikánů a lvounů vzroste asi 5×. ",title:"Mercado de mariscos y pescado en Valparaíso",url:"/d/mercado-de-mariscos-y-pescado-en-valparaiso/",address:"valparaíso, Chile",type:"11:ryby:Ryby",satisfaction:1},{point:[18.29398900000001,49.8359865],web:"http://www.dr-naproti.cz/cs/mlecny-bar-naproti/",level:1,score:4,description:"V lednu 2012 otevřený podnik, jehož cílem je vytvořit pracovní pozice pro zdravotně postižené. Dát si tu můžete mléčné koktejly nebo jiné mléčné dobroty, přičemž jejich zdrojem je beskydská mlékárna Čeladná, obložené chleby nebo palačinky. Rodiče ocení opravdu velkorysý dětský koutek.",title:"Mléčný bar Naproti",url:"/d/mlecny-bar-naproti/",address:"Zeyerova, 2572/1, Ostrava, Česká republika",type:"1:restaurace:Restaurace;8:cukrarny:Cukrárny",satisfaction:1},{point:[-1.9171460980224992,43.272321882452424],web:"http://www.mugaritz.com/",level:2,score:5,description:"Číslo 3 na seznamu „World's 50 Best Restaurants“ za rok 2012. Zpochybnit zažitá pravidla a experimentovat – to jsou základní principy v Mugaritzu.",title:"Mugaritz",url:"/d/mugaritz/",address:"Otzazulueta Baserria, Aldura Aldea, 20, Errenteria, Španělsko",type:"1:restaurace:Restaurace",satisfaction:1},{point:[-0.1385225999999875,51.511617],web:"http://www.nopi-restaurant.com/",level:1,score:0,description:"Poslední přírůstek londýnského Ottolenghi impéria, narozdíl od ostatních koncipovaný výhradně jako klasická (lepší) restaurace. Inovativní středomořská kuchyně zůstává.",title:"NOPI",url:"/d/nopi/",address:"Warwick street, 21-22, London, Velká Británie",type:"1:restaurace:Restaurace",satisfaction:1},{point:[14.315611211730925,48.810224754888225],web:"http://www.hospodanalouzi.cz/cs/",level:0,score:0,description:"Útulná hospoda s nabídkou hotovek, využívající sezóny a českých ryb. Nabídka pivovaru Eggenberg, plechové cedule s retro reklamami a v úterý večer živá hudba.",title:"Na louži",url:"/d/na-louzi/",address:"Kájovská, 66, Český Krumlov, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[-0.0877444000000196,51.5265425],web:"http://www.barnightjar.com/",level:2,score:0,description:"Velmi nenápadný bar, jehož tmavé, jen malou cedulkou označené dveře snadno přejdete. Byla by to ale škoda – zdejší lístek je skutečně originální a prozrazuje až vědecký zápal osazenstva: od objevování starých receptů z nejstarší koktejlové éry přes klasiky s jedinečným twistem až po signature koktejly z vlastnoručně vyrobených ingrediencí jako beef infusion nebo whisky zrající s cheddarem. #18 na žebříčku TOP50 světových barů.",title:"Nightjar",url:"/d/nightjar/",address:"City road, 131, London, Velká Británie",type:"7:napoje:Nápoje",satisfaction:1},{point:[16.60623899999996,49.21908999999999],web:"http://www.noemarch.cz/",level:2,score:4,description:"Luxusní restaurace, která Noem Arch zaujme především svým nápaditým interiérem, netradičními kombinacemi použitých surovin a efektní prezentací servírovaných pokrmů.",title:"Noem Arch",url:"/d/noem-arch/",address:"Cimburkova, 9, Brno, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[14.318052800000032,48.8128014],web:"",level:0,score:0,description:"Pizzerie mezi zámkem a klášterem, přesto stranou turistického ruchu. Skvělá pizza, domácí těstoviny a usměvavý personál, žádná past na turisty.",title:"Nonna Gina",url:"/d/nonna-gina/",address:"Klášterní, 52, Český Krumlov, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[14.474512499999946,50.3516323],web:"http://www.nemymedved.cz/",level:1,score:4,description:"Pivní bar s často se měnící nabídkou 8 piv, žádné europivo, spíš zajímavější a menší pivovary.",title:"Němý Medvěd",url:"/d/nemy-medved/",address:"náměstí Míru, 27, Mělník, Česká republika",type:"1:restaurace:Restaurace;7:napoje:Nápoje",satisfaction:1},{point:[15.811860600000045,50.2136662],web:"http://zelenina-hrbek.cz/",level:0,score:3,description:"Obchod s legračním názvem „Speciální obchod s ovocem a zeleninou u Hrbků“ nabízí především konzervativnější druhy ovoce a zeleniny a na první pohled je to ovozel jako každý jiný. Při bližším zkoumání a pravidelných nákupech ale oceníte kvalitu, čerstvost a především český původ většiny produkce. \r\n",title:"Ovoce a zelenina Hrbek",url:"/d/ovoce-a-zelenina-hrbek/",address:"Puškinova, 861/2, Hradec Králové, Česká republika",type:"5:ovozel:Ovozel",satisfaction:1},{point:[14.423281900000006,50.0799886],web:"http://www.pastakrusta.cz/",level:1,score:3,description:"Fast food moderního střihu. Na tabuli si vyberete těstoviny a k nim jednu z doporučených omáček, jídlo vám kuchař následně připraví před vašima očima na jedné z plotýnek za barem. Kromě pasty si můžete dát salát, domácí limonádu nebo třeba něco sladkého. V podniku se dá posedět v poměrně velké horní části nebo si vzít jídlo s sebou.",title:"Pasta Krusta",url:"/d/pasta-krusta/",address:"Vodičkova, 15, Praha, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[-67.52988898122862,-14.440674114277112],web:"",level:0,score:3,description:"Rodinný podnik, kde dennodenně servírují vynikající housku s hovězím ve třech variantách a zeleninou. Čtvrtá varianta je ze sóji. Nejpálivější salsa k dispozici.",title:"Paté y Verdura",url:"/d/pate-y-verdura/",address:"Comercio, Rurrenabaque, Bolívie",type:"1:restaurace:Restaurace",satisfaction:1},{point:[16.613434782803324,49.197607562413914],web:"http://www.restaurant-pavillon.cz/",level:2,score:5,description:"Nové působiště šéfkuchaře Michala Götha, který si Pavillon zvolil jako volné pokračování svého dvacetiletého angažmá v čele již neexistujícího podniku U Kastelána. Zbrusu nová kuchyně i odvážná rekonstrukce Zemanovy kavárny jsou lákadla na povrchu. Zkušený šéfkuchař s dlouhou praxí by pak měl zaručit výjimečné zážitky nejen v brněnském kontextu.",title:"Pavillon",url:"/d/pavillon/",address:"Jezuitská, 6, Brno, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[16.610550500000045,49.1952001],web:"",level:0,score:3,description:"Pekařství s jinak běžným (a prý bohužel rozpékaným) sortimentem je zajímavé jednou věcí – výrobou čerstvě plněných baget ze surovin dle výběru zákazníka, prodávaných na váhu. Pár stolků umožňuje zkonzumovat je i na místě.",title:"Pekařství na Kobližné",url:"/d/pekarstvi-na-koblizne/",address:"Kobližná, 10, Brno, Česká republika",type:"2:pekarny:Pekárny;8:cukrarny:Cukrárny",satisfaction:1},{point:[16.07859709046022,49.6333860838343],web:"http://www.pension-klokoci.cz/restaurace-na-vysocine",level:1,score:4,description:"Velmi příjemná restaurace orientovaná na poctivá domácí jídla, zasazená do malebné krajiny Vysočiny. Přestože se v jídelním lístku objevují i výlety do Asie či Itálie, nenechte se tím odradit. Zkuste duhového pstruha na přepuštěném másle. ",title:"Penzion Klokočí",url:"/d/penzion-klokoci/",address:"Kadov, 79, Kadov u Sněžného, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[14.565828900000042,50.4300897],web:"http://www.penzionkokorin.cz/",level:1,score:4,description:"Restaurace v malé vesničce uprostřed kokořínských lesů je otevřená pouze v neděli na oběd. Na krátkém menu najdete zhruba 10 jídel připravených právě pro daný víkend. Vaří zde současnou kuchyni, využívají lokální suroviny.",title:"Penzion Kokořín",url:"/d/penzion-kokorin/",address:"Kokořín, 12, Kokořín, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[14.433327400000053,50.07679100000001],web:"http://www.facebook.com/photuanlan",level:0,score:3,description:"Novější pobočka oblíbeného vietnamského bufetu Pho Vietnam, který svoji slávu začal šířit na náměstí Jiřího z Poděbrad. I v Anglické si jídlo objednáváte u pultu, kde ho také rovnou zaplatíte, nicméně vše dostanete na porcelánu ke stolu. Prostředí je tedy typicky restaurační.",title:"Pho Vietnam (Anglická)",url:"/d/pho-vietnam-anglicka/",address:"Anglická, 15, Praha, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[16.606006200000024,49.1979099],web:"http://www.pivniopice.cz/",level:1,score:3,description:"Pivnice v naprostém centru Brna, kde najdete piva menších pivovarů a i něco jiného k snědku než je jenom tradiční utopenec, nakládaný hermelín  a žebra.",title:"Pivní opice",url:"/d/pivni-opice/",address:"Joštova, 4, Brno, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[17.274116700000036,48.879532],web:"http://www.pod-orechem.cz/",level:1,score:4,description:"Prodej speciálních piv, vína, medoviny, pálenek a pochutin (kozí sýry, plněné feferonky, grilovaná zelenina)",title:"Pivotéka Pod ořechem",url:"/d/pivoteka-pod-orechem/",address:"Petrov, 349, Petrov, Česká republika",type:"7:napoje:Nápoje",satisfaction:1},{point:[16.757455590985046,48.7404118055965],web:"http://www.penzionpodzamkem.com/",level:1,score:2,description:"Restaurace s příjemnou zahrádkou přímo pod valtickým zámkem.",title:"Pod Zámkem",url:"/d/pod-zamkem/",address:"Polní, 1060, Valtice, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[-0.10943040000006476,51.5199426],web:"http://www.prufrockcoffee.com/",level:1,score:0,description:"Londýnské tréninkové doupě baristické smetánky v podobě industriální kavárny kávového kouzelníka Gwilyma Daviese (WBC šampión 2009), doplněné o roztomilé zvířátkové ilustrace, artisanal food a alternativní metody včetně aeropressu. ",title:"Prufrock",url:"/d/prufrock/",address:"Leather Lane, 23-25, Londýn, Velká Británie",type:"3:kavarny:Kavárny",satisfaction:1},{point:[16.97216370000001,49.9677133],web:"http://www.predmesti.cz/",level:1,score:2,description:"Kavárna plná regionálních produktů a výběrové kávy z české pražírny Doubleshot. Podnik je postavený na modelu sociálního podnikání a vytváří pracovní místa pro lidi se znevýhodněním.",title:"Předměstí",url:"/d/predmesti/",address:"Gen. Svobody, 30, Šumperk, Česká republika",type:"3:kavarny:Kavárny",satisfaction:1},{point:[17.514086599999928,49.1733489],web:"http://www.napajedla.eu/",level:1,score:3,description:"Velká restaurace a pivnice s nabídkou české kuchyně, možností pronájmu salonku a venkovním posezením.",title:"Restaurace & Pivnice Baltaci",url:"/d/restaurace-pivnice-baltaci/",address:"Masarykovo náměstí, 212, Napajedla, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[17.222469096264604,49.81213532630458],web:"http://www.navyhlidce.com/",level:1,score:3,description:"Rodinná restaurace nabízející převážně českou kuchyni s venkovním posezením a možností pořádání oslav.",title:"Restaurace Na Vyhlídce",url:"/d/restaurace-na-vyhlidce/",address:"Paseka, 142, Paseka, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[16.58232276284332,49.41496592236734],web:"http://www.hotel-sladovna.cz/cs_CZ/leve-menu/gastronomie/",level:1,score:3,description:"Pivovarská restaurace s českou i mezinárodní kuchyní. Možnost posezení v moderně vypadající části restaurace či v pivnici (Šenk u Prokuristy).",title:"Restaurace Sladovna",url:"/d/restaurace-sladovna/",address:"Černá Hora, 3/5, Černá Hora, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[14.475524052114906,48.974166896823256],web:"http://www.zvon-cb.cz/",level:1,score:4,description:"Restaurace Zvon si zakládá své renomé na čerstvých a kvalitních surovinách, část menu se navíc připravuje výhradně ze surovin od jihočeských zemědělců. Moderní kuchyně.",title:"Restaurace Zvon",url:"/d/restaurace-zvon/",address:"Náměstí Přemysla Otakara II., 90/28, České Budějovice, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[15.772535699999935,50.0343195],web:"http://www.udvoukohoutku.cz/",level:1,score:3,description:"Restaurant U Dvou Kohoutků je malá restaurace v blízkosti centra Pardubic. Česká a zahraniční kuchyně, v době obědů menu z polévky, tří jídel na výběr a dezertu. ",title:"Restaurant U Dvou Kohoutků",url:"/d/restaurant-u-dvou-kohoutku/",address:"Smilova, 364, Pardubice, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[14.458420923803715,49.965332116085726],web:"http://robertson.cz/",level:1,score:3,description:"Klasická česká masna, ale navíc s nabídkou vyzrálého masa na steaky, pravé anglické a americké slaniny, syrových klobásek a pár nemasových britských produktů.",title:"Robertson (Dolní Břežany)",url:"/d/robertson-dolni-brezany/",address:"U náměstí, 711, Dolní Břežany, Česká republika",type:"4:maso:Maso",satisfaction:1},{point:[15.809629599999994,50.2406704],web:"http://farmakejklicek.webnode.cz/",level:1,score:3,description:"Rodinná farma Kejklíček nabízí celoročně brambory, cibuli a postupně rozšiřovaný sortiment domácích mléčných výrobků. Nečekejte pevnou otvírací dobu ani stylovou farmářskou prodejnu – rovnou zazvoňte na paní Kejklíčkovou, nebo si odchytněte někoho na dvoře.",title:"Rodinná farma Kejklíček",url:"/d/rodinna-farma-kejklicek/",address:"Petra Jilemnického, 75/134, Hradec Králové - Plotiště, Česká republika",type:"9:farmy:Farmy",satisfaction:1},{point:[14.436367000000018,50.0761614],web:"http://saharacafe.com/",level:2,score:1,description:"Kavárna a restaurace s mezinárodní kuchyní.",title:"Sahara cafe a restaurant",url:"/d/sahara-cafe-a-restaurant/",address:"Náměstí Míru, 6, Praha, Česká republika",type:"1:restaurace:Restaurace;3:kavarny:Kavárny",satisfaction:1},{point:[13.464895800000022,52.4981988],web:"http://www.sake-kontor.de/",level:1,score:0,description:"Speciálka na japonské saké. Od low endu na vaření až po vyšší třídu, kterou budete jinde shánět jen obtížně.",title:"Sake Kontor",url:"/d/sake-kontor/",address:"Markgrafendamm, 34, Berlin, Německo",type:"7:napoje:Nápoje",satisfaction:1},{point:[13.433373299999971,52.4899803],web:"http://www.sauvageberlin.com/",level:1,score:4,description:"Paleo restaurace hlásící se k hnutí Real Food Revolution. Krátké, často se měnící menu.Bezlepková, bezlaktózová kuchyně, maso z volného chovu, šetrný přístup k surovinám.",title:"Sauvage",url:"/d/sauvage/",address:"Pflügerstrasse, 25, Berlín, Německo",type:"1:restaurace:Restaurace",satisfaction:1},{point:[14.44575789999999,50.0614904],web:"http://sklizeno.cz/",level:1,score:4,description:"Kvalitní potraviny známého původu. Některé v kvalitě bio, farmářské produkty, zelenina, ovoce, káva, víno, pivo, mošty.",title:"Sklizeno (Nusle)",url:"/d/sklizeno-nusle/",address:"Svatoslavova, 849/24, Praha, Česká republika",type:"2:pekarny:Pekárny;4:maso:Maso;5:ovozel:Ovozel;6:lahudky:Lahůdky;7:napoje:Nápoje;9:farmy:Farmy",satisfaction:1},{point:[16.592438517335495,49.22691822321076],web:"http://www.sklizeno.cz/",level:1,score:0,description:"Kvalitní potraviny známého původu. Některé v kvalitě bio, farmářské produkty, zelenina, ovoce, káva, víno, pivo, mošty.",title:"Sklizeno (Palackého)",url:"/d/sklizeno-palackeho/",address:"Palackého třída, 93, Brno, Česká republika",type:"2:pekarny:Pekárny;4:maso:Maso;5:ovozel:Ovozel;6:lahudky:Lahůdky;7:napoje:Nápoje",satisfaction:1},{point:[13.481500600000004,49.086586],web:"http://www.slunecnakavarna.cz/index.htm",level:1,score:4,description:"Nekuřácká kavárna přímo uprostřed obce Srní byla otevřena v roce 2010. Od té doby se těší velké oblibě díky svým skvělým domácím zákuskům.",title:"Slunečná kavárna",url:"/d/slunecna-kavarna/",address:"8, Srní, Česká republika",type:"8:cukrarny:Cukrárny",satisfaction:1},{point:[-0.1391399999999976,51.51346299999999],web:"http://speakeasycoffee.co.uk/",level:1,score:5,description:"Kavárna leží jen pár kroků od slavné Carnaby Street a nabízí nejrůznější způsoby přípravy kávy od renomovaných britských pražíren. Sladké pečivo a nejrůznější sendviče a salàty doplňují nabídku o něco k zakousnutí po celý den. ",title:"Speakeasy Espresso & Brew Bar",url:"/d/speakeasy-espresso-brew-bar/",address:"Lowndes court, 3, London, Velká Británie",type:"3:kavarny:Kavárny",satisfaction:1},{point:[13.41599389999999,50.4613933],web:"http://www.steakbar.cz/",level:1,score:2,description:"Restaurace v historickém centru města, která se zaměřuje na přípravu steaků.",title:"Steak Bar",url:"/d/steak-bar/",address:"Puchmayerova, 119, Chomutov, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[2.336407099999974,48.8662301],web:"http://www.telescopecafe.com/",level:1,score:5,description:"Telescope je malinká kavárna v centru Paříže, kde dostanete prémiovou kávu, zejména z produkce Has Bean Coffee.",title:"Telescope",url:"/d/telescope/",address:"rue Villedo, 5, Paris, Francie",type:"3:kavarny:Kavárny",satisfaction:1},{point:[14.444500231213397,50.07214182037923],web:"http://www.asianfood.cz/",level:0,score:3,description:"Obchod s potravinami převážně z JV Asie. Zajímavý výběr čerstvých ingrediencí a celkově široká nabídka. ",title:"Thai’s Asian Food Shop",url:"/d/thais-asian-food-shop/",address:"Francouzská, 66, Praha 10, Česká republika",type:"5:ovozel:Ovozel;6:lahudky:Lahůdky",satisfaction:1},{point:[14.415003200000001,50.07664949999999],web:"http://www.trms.cz/",level:2,score:5,description:"Řeznictví specializované na maso z pečlivě vybíraných chovů malého rozsahu. Podnik provozuje Paul Day — šéfkuchař pražské restaurace Sansho. Speciality podniky — české dry aged hovězí, Přeštíci, domácí klobásky a řezničina v britském stylu.",title:"The Real Meat Society",url:"/d/the-real-meat-society/",address:"Náplavní, 5, Praha 1, Česká republika",type:"4:maso:Maso",satisfaction:1},{point:[17.250227701258154,49.594717917309396],web:"https://www.facebook.com/pages/To-pravé-z-HANÉ-i-odjinud/306508759383098",level:0,score:3,description:"Prodejna regionálních a farmářských produktů z okolí Olomouce. Malá prodejna, která se pyšní velkou zásobou mléčných výrobků z Hané i dalších lokálních značek třeba i z Jeseníků.",title:"To pravé z Hané i odjinud",url:"/d/to-prave-z-hane-i-odjinud/",address:"Úzká, Olomouc, Česká republika",type:"6:lahudky:Lahůdky;9:farmy:Farmy",satisfaction:1},{point:[16.602335700000026,49.1996908],web:"http://www.udobrehopastyre.cz/",level:0,score:4,description:"Stylové bistro se zaměřením na domácí slovenskou a českou kuchyni. ",title:"U Dobrého Pastýře",url:"/d/u-dobreho-pastyre/",address:"Veveří, 16, Brno, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[17.407993825933772,49.04886411578091],web:"http://www.sruburaka.cz/",level:1,score:4,description:"Nekuřácká restaurace ve srubu s venkovním posezením u fotbalového hřiště.",title:"U Raka",url:"/d/u-raka/",address:"KOstelany nad Moravou, Kostelany nad Moravou, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[18.238276311639424,49.81033752634161],web:"",level:0,score:3,description:"Nenápadná prodejna potravin, která se může pyšnit prodejem vlastních uzenin značky Váňa. K dostání jsou pouze zde a ve [Starobělské domácí pekárně](http://www.scuk.cz/d/starobelska-domaci-pekarna/). Zdejší uzeniny jsou vyrobeny bez použití separátu, sóji a jiných moderních „vylepšení“. Ctí obyčejné a poctivé receptury české uzenářské školy.  ",title:"Uzeniny Váňa",url:"/d/uzeniny-vana/",address:"Na Drahách, 18, Ostrava, Česká republika",type:"4:maso:Maso",satisfaction:1},{point:[16.604495799999995,49.1634115],web:"http://www.valoria.cz/",level:2,score:4,description:"Restaurace v okrajové části Brna se zaměřením na tradiční českou kuchyni v moderní úpravě. Výborně dostupná z D1 a D2. ",title:"Valoria restaurant",url:"/d/valoria-restaurant/",address:"Bohunická, 2, Brno, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[14.456896099999994,50.0938738],web:"http://www.facebook.com/veltlin",level:1,score:5,description:"Vinotéka zaměřená přírodní vína ze stáje vinného nadšence a buditele Bogdana Trojaka, který vede i zásilkový obchod [Veltlin.cz](http://www.scuk.cz/d/veltlin-cz/). Přes den vás tu čeká vinné bistro, kde můžete zajít na sklenku a něco malého k zakousnutí po práci. Po večerech zase ve Veltlinu ožívá degustační sklep, kde se konají řízené degustace spřátelených vinařů a malých producentů.",title:"Veltlin in Karlin",url:"/d/veltlin-in-karlin/",address:"Křižíkova, 488/115, Praha 3, Česká republika",type:"7:napoje:Nápoje",satisfaction:1},{point:[4.486280699999952,51.9243025],web:"http://www.Vlaamschbroodhuys.com/",level:1,score:3,description:"Pekárna vyhlášená svým kváskovým chlebem. Větší část podniku ovšem v rámci konceptu ´baker's café´ zabírá kavárna, kde si můžete dát snídani, salát, polévku či jeden z místních chlebů ve formě obloženého sendviče. Venkovní posezení. Pozor – platit lze výhradně kartou, a to i v pekárně. ",title:"Vlaamsch Broodhuys (Rotterdam)",url:"/d/vlaamsch-broodhuys-rotterdam/",address:"Meent, 8a, Rotterdam, Nizozemsko",type:"2:pekarny:Pekárny;3:kavarny:Kavárny",satisfaction:1},{point:[14.473064399999998,50.3508449],web:"http://www.lobkowicz-melnik.cz/gastro/vyhlidkova-restaurace",level:1,score:3,description:"Restaurace s kapacitou 200 míst a nádhernou vyhlídkou na soutok Labe s Vltavou a vinici sv. Ludmily. Nabídka vín zámeckého vinařství.",title:"Vyhlídková restaurace, zámek Mělník",url:"/d/vyhlidkova-restaurace-zamek-melnik/",address:"Svatováclavská, 19/16, Mělník, Česká republika",type:"1:restaurace:Restaurace",satisfaction:1},{point:[14.426566999999977,50.0899345],web:"http://www.vino-klub.cz/",level:1,score:4,description:"Velká internetová vinotéka nabízející především vína seřazená do tématických kolekcí, které jsou vytvářeny na základě kritérií jako například odrůda, vinařská oblast, země původu, svátky, pokrmy, atd. Kromě těchto kolekcí je možné vína nakupovat i jednotlivě. Víno klub má i kamennou prodejnu v pražské ulici Benediktská, kde se mimo jiné pořádají degustace vína.",title:"Víno klub",url:"/d/vino-klub/",address:"Benediktská, 3, Praha, Česká republika",type:"6:lahudky:Lahůdky;7:napoje:Nápoje",satisfaction:1},{point:[14.476008800000045,50.3515962],web:"http://vez.melnicek.cz/",level:0,score:3,description:"Čajovna, galerie, vyhlídka, přednáškový sál a vůbec ledacos v jednom.",title:"Čajovna Ve věži",url:"/d/cajovna-ve-vezi/",address:"5. května, 5, Mělník, Česká republika",type:"7:napoje:Nápoje",satisfaction:1}];ScukMap.model.SimpleDataProxy=function(){this.dataCache=new ScukMap.model.DataCache};ScukMap.model.SimpleDataProxy.prototype={init:function(){this.dataCache.init()},getData:function(e,t,n,r,i){var s=this,o=null;if(r!=0){var u=dummyData.length;o=[];for(var a=0;a<u;a++){var f=dummyData[a],l=ScukMap.utils.DataUtil.parseMarkerType(f.type),c=$.inArray(r,l);c>-1&&o.push(f)}}else o=dummyData;e.apply(this,[o])}};ScukMap.model.DataCache=function(){this.cache=null;this.localStorage=null};ScukMap.model.DataCache.prototype={init:function(){this.cache=[];Modernizr.localstorage&&(this.localStorage=new ScukMap.model.DataLocalStorage)},store:function(e,t,n,r){var i=this.constructKey(t,n,r);this.cache[i]=e;this.localStorage.setItem(i,e)},get:function(e,t,n){var r=null,i=this.constructKey(e,t,n);r=this.cache[i];if(!r){r=this.localStorage.getItem(i);log(r)}return r},constructKey:function(e,t,n){return e+"-"+t+"-"+n}};ScukMap.model.DataLocalStorage=function(){this.totalPushed=null};ScukMap.model.DataLocalStorage.prototype={init:function(){},setItem:function(e,t){var n=JSON.stringify(t);try{localStorage.setItem(e,n)}catch(r){console.log("LIMIT REACHED: ("+i+")");console.log(r)}},getItem:function(e){var t=localStorage.getItem(e);return t&&JSON.parse(t)}};ScukMap.model.Model=function(){this.callbacks={};this.dataProxy=new ScukMap.model.SimpleDataProxy;this.currentCenter=null;this.currentZoomLevel=null;this.currentType=0;this.currentTiles=null};ScukMap.model.Model.prototype={init:function(){this.dataProxy.init()},updateViewPort:function(e,t,n){this.currentCenter=e;this.currentZoomLevel=t;this.currentTiles=n;this.dataProxy.getData($.proxy(this.onUpdateData,this),this.currentCenter,this.currentZoomLevel,this.currentType,this.currentTiles)},updateType:function(e,t){this.currentType=e;t&&this.dataProxy.getData($.proxy(this.onUpdateData,this),this.currentCenter,this.currentZoomLevel,this.currentType,this.currentTiles)},onUpdateData:function(e){this.callbacks.onUpdateData&&this.callbacks.onUpdateData.apply(this,[e])}};ScukMap.controller.Controller=function(e){this.model=e};ScukMap.controller.Controller.prototype={init:function(){this.model.init()},updateViewPort:function(e,t,n){this.model.updateViewPort(e,t,n)},updateType:function(e,t){this.model.updateType(e,t)}};ScukMap.view.UserLocationControl=function(e){this.ENABLE_IMAGE_OFFSET="-30px 0px";this.DISABLE_IMAGE_OFFSET="0px 0px";this.callbacks={};this.opts=e;this.element=null;this.enabled=!1;this.latLng=null;this.zoomLevel=null};ScukMap.view.UserLocationControl.prototype={init:function(){this.element=$("#"+this.opts.userLocationControlId);this.element.on("click",$.proxy(this.onClick,this))},enable:function(e,t){this.enabled=!0;this.latLng=e;this.zoomLevel=t;this.element.css("background-position",this.ENABLE_IMAGE_OFFSET)},disable:function(){this.disabled=!0;this.element.css("background-position",this.DISABLE_IMAGE_OFFSET)},onClick:function(){this.enabled&&this.callbacks.hasOwnProperty("onClick")&&this.callbacks.onClick.apply(this,[this.latLng,this.zoomLevel])}};ScukMap.view.HashNavigator=function(e){this.callbacks={};this.opts=e;this.lockHash=!1};ScukMap.view.HashNavigator.prototype={init:function(){$(window).bind("hashchange",$.proxy(this.onHashChange,this))},getInitialState:function(){var e=$.bbq.getState();return e},updateViewPort:function(e,t){var n={lat:e.lat(),lng:e.lng(),z:t},r=$.bbq.getState();this.hashChanged(r,n);$.bbq.pushState(n)},hashChanged:function(e,t){var n=!0;parseFloat(e.lat)===t.lat&&parseFloat(e.lng)===t.lng&&parseFloat(e.z)===t.z&&(n=!1);return n},updateType:function(e){var t=$.bbq.getState("type");t!==e&&$.bbq.pushState({type:e})},updateMarker:function(e){$.bbq.pushState({marker:e})},onHashChange:function(){if(this.callbacks.hasOwnProperty("onHashChange")){var e=$.bbq.getState();this.callbacks.onHashChange.apply(this,[e])}}};ScukMap.view.AutoComplete=function(e){this.callbacks={};this.opts=e;this.plugin=null};ScukMap.view.AutoComplete.prototype={init:function(){var e=this;this.plugin=$("#"+this.opts.autoCompleteId).geocomplete().bind("geocode:result",function(t,n){e.onGeocodeResult(t,n)}).bind("geocode:error",function(t,n){e.onGeocodeError(t,n)}).bind("geocode:multiple",function(t,n){e.onGeocodeMultiple(t,n)})},onGeocodeResult:function(e,t){if(this.callbacks.hasOwnProperty("onGeocodeResult")){var n=t.geometry.location,r=t.geometry.viewport;this.callbacks.onGeocodeResult.apply(this,[n,r])}},onGeocodeError:function(e,t){log("AutoComplete.js: geocoding ERROR: "+t)},onGeocodeMultiple:function(e,t){log("AutoComplete.js: geocoding Multiple: "+t.length+" results found")}};ScukMap.view.InfoWindow=function(e){this.googleMap=e;this.googleInfoWindow=null;this.marker=null};ScukMap.view.InfoWindow.prototype={init:function(){this.googleInfoWindow=new google.maps.InfoWindow},close:function(){this.googleInfoWindow.close();this.marker=null},setContent:function(e){var t=ScukMap.utils.TextUtil.add3dots(e.description,"...",100),n=ScukMap.utils.TextUtil.removeCountry(e.address,", Česká republika"),r=e.url.substr(1);r+=window.location.hash;var i="<section class='infoWindow' style='height:300px;'><header><h1>"+e.title+"</h1>"+"<div class='icons'><span class='score' data-score='"+e.score+"'></span><span class='level' data-level='"+e.level+"'></span><span class='satisfaction' data-satisfaction='"+e.satisfaction+"'></span></div>"+"</header>"+"<p class='address'>"+n+" <a href='"+e.web+"' target='_blank'>"+e.web+"</a></p>"+"<p class='desc'>"+t+"</p>"+"<footer><a href='"+r+"' title='"+e.title+"'>DETAIL</a></footer></section>",s=$(i);log("outterHeight:",s.outerHeight());var o={content:i};this.googleInfoWindow.setOptions(o)},open:function(e){this.googleInfoWindow.open(this.googleMap,e.googleMarker);this.marker=e}};ScukMap.view.TypeSelector=function(e){this.callbacks={};this.opts=e;this.element=null;this.options=null;this.selectedType=0};ScukMap.view.TypeSelector.prototype={init:function(){var e=this;this.element=$("#"+this.opts.typeSelectorId);this.options=this.element.find("option");this.element.on("change",function(){e.onTypeChange(this,!0)})},setType:function(e,t){this.options.filter("[value="+e+"]").attr("selected","selected");this.onTypeChange(this.element,t)},setDefault:function(){this.options.filter("[value=0]").attr("selected","selected");this.onTypeChange(this.element)},onTypeChange:function(e,t){if(this.callbacks.hasOwnProperty("onTypeChange")){var n=$(e).val();if(n!==this.selectedType){this.selectedType=n;this.callbacks.onTypeChange.apply(this,[n,t])}}}};ScukMap.view.MarkersImages={spriteSize:new google.maps.Size(27,41),spriteUrl:"images/mapmarks.png",transparentSpriteUrl:"images/mapmarks50.png",shadowSize:new google.maps.Size(35,24),shadowAnchor:new google.maps.Point(1,23),shadowIcon:null,images:null,transparentImages:null,init:function(){this.images=[];this.transparentImages=[];var e=12;for(var t=0;t<e;t++){var n=new google.maps.MarkerImage(ScukMap.view.MarkersImages.spriteUrl,ScukMap.view.MarkersImages.spriteSize,new google.maps.Point(0,t*ScukMap.view.MarkersImages.spriteSize.height)),r=new google.maps.MarkerImage(ScukMap.view.MarkersImages.spriteUrl,ScukMap.view.MarkersImages.spriteSize,new google.maps.Point(ScukMap.view.MarkersImages.spriteSize.width,t*ScukMap.view.MarkersImages.spriteSize.height));this.images.push({out:n,over:r})}e=12;for(t=0;t<e;t++){n=new google.maps.MarkerImage(ScukMap.view.MarkersImages.transparentSpriteUrl,ScukMap.view.MarkersImages.spriteSize,new google.maps.Point(0,t*ScukMap.view.MarkersImages.spriteSize.height));r=new google.maps.MarkerImage(ScukMap.view.MarkersImages.transparentSpriteUrl,ScukMap.view.MarkersImages.spriteSize,new google.maps.Point(ScukMap.view.MarkersImages.spriteSize.width,t*ScukMap.view.MarkersImages.spriteSize.height));this.transparentImages.push({out:n,over:r})}this.shadowIcon=new google.maps.MarkerImage(this.spriteUrl,this.shadowSize,new google.maps.Point(27,1015),this.shadowAnchor)},getMarkerImageForType:function(e,t){var n=-1,r=e.split(";"),i=r.length;if(i==1){var e=r[0].split(":")[0];e=parseInt(e);switch(e){case 1:n=5;break;case 2:n=8;break;case 3:n=3;break;case 4:n=5;break;case 5:n=8;break;case 6:n=4;break;case 7:n=10;break;case 8:n=2;break;case 9:n=3;break;case 11:n=6}}else n=0;return t?this.transparentImages[n]:this.images[n]}};ScukMap.view.MarkerManager=function(e,t){this.callbacks={};this.googleMap=e;this.infoWindow=t;this.markers=null;this.openInfoWindowId=""};ScukMap.view.MarkerManager.prototype={init:function(){this.markers={};ScukMap.view.MarkersImages.init();this.infoWindow.googleInfoWindow.addListener("closeclick",$.proxy(this.onInfoWindowClose,this))},updateMarkers:function(e){var t=this,n=[];$.each(e,function(e,r){if(typeof r!="undefined"&&r!==null){var i=t.markers[r.url];if(!i){i=t.addMarker(r);if(i.id===t.openInfoWindowId){t.openInfoWindowId="";i.openInfoWindow()}}n[r.url]=i}});$.each(this.markers,function(e,r){if(r){var i=n[r.id];i||t.clearMarker(r)}})},clearMarker:function(e){e.googleMarker.setMap(null);this.markers[e.id]=null},clearMarkers:function(){$.each(this.markers,function(e,t){t.setMap(null)})},addMarker:function(e){var t=this,n=new ScukMap.view.Marker(e,this.googleMap,this.infoWindow);n.callbacks.onClick=$.proxy(this.onMarkerClick,this);this.markers[n.id]=n;return n},removeMarker:function(){},onMarkerClick:function(e){this.callbacks.hasOwnProperty("onInfoWindowChange")&&this.callbacks.onInfoWindowChange.apply(this,[e])},onInfoWindowClose:function(){this.callbacks.hasOwnProperty("onInfoWindowChange")&&this.callbacks.onInfoWindowChange.apply(this,[""])},openInfoWindow:function(e){var t=this.markers[e];t?t.openInfoWindow():this.openInfoWindowId=e},closeInfoWindow:function(){this.infoWindow&&this.infoWindow.close()}};ScukMap.view.Marker=function(e,t,n){this.Z_INDEX=9;this.callbacks={};this.id=e.url;this.data=e;this.googleMap=t;this.infoWindow=n;var r=e.point,i=Math.random()>.5?!0:!1;this.icons=ScukMap.view.MarkersImages.getMarkerImageForType(e.type,i);this.shadowIcon=ScukMap.view.MarkersImages.shadowIcon;var s=this;this.googleMarker=new google.maps.Marker({position:new google.maps.LatLng(r[1],r[0]),map:s.googleMap,title:e.title,icon:this.icons.out,shadow:this.shadowIcon});this.googleMarker.setZIndex(this.Z_INDEX);google.maps.event.addListener(this.googleMarker,"click",$.proxy(this.onClick,this));google.maps.event.addListener(this.googleMarker,"mouseover",$.proxy(this.onMouseOver,this));google.maps.event.addListener(this.googleMarker,"mouseout",$.proxy(this.onMouseOut
,this))};ScukMap.view.Marker.prototype={onClick:function(e){this.infoWindow.close();this.infoWindow.setContent(this.data);this.infoWindow.open(this);this.callbacks.hasOwnProperty("onClick")&&this.callbacks.onClick.apply(this,[this.id])},openInfoWindow:function(){(!this.infoWindow.marker||this.infoWindow.marker.id!==this.id)&&google.maps.event.trigger(this.googleMarker,"click")},onMouseOver:function(){this.googleMarker.setIcon(this.icons.over);this.googleMarker.setZIndex(this.Z_INDEX+1)},onMouseOut:function(){this.googleMarker.setIcon(this.icons.out);this.googleMarker.setZIndex(this.Z_INDEX)},setMap:function(){this.googleMarker.setMap(null)}};ScukMap.view.MarkerGridOverlay=function(e,t,n){this.tiles=[]};ScukMap.view.MarkerGridOverlay.prototype={tileSize:new google.maps.Size(256,256),maxZoom:19,name:"Tile #s",alt:"Tile Coordinate Map Type",getTile:function(e,t,n){var r=n.createElement("div");r.style.width=this.tileSize.width+"px";r.style.height=this.tileSize.height+"px";this.tiles.push({coord:e,zoom:t});return r},releaseTile:function(e){},clearTiles:function(){this.tiles=[]},computeVisibleTiles:function(e){var t=e.getBounds(),n=[],r=t.getNorthEast(),i=t.getSouthWest(),s=new google.maps.LatLng(r.lat(),i.lng()),o=new google.maps.LatLng(i.lat(),r.lng()),u=e.getZoom(),a=[],f=this.pointToTile(e,s,u),l=this.pointToTile(e,o,u),c=l.x-f.x+1,h=l.y-f.y+1,p=Math.pow(2,u),d=f.x,v=f.y;while(h--){while(c--)a.push({x:d+c,y:v});v++;c=l.x-f.x+1}return a},pointToTile:function(e,t,n){var r=256,i=e.getProjection(),s=i.fromLatLngToPoint(t),o=new google.maps.Point(s.x*Math.pow(2,n),s.y*Math.pow(2,n)),u=new google.maps.Point(Math.floor(o.x/r),Math.floor(o.y/r));return u}};ScukMap.view.Map=function(e){this.INITIAL_LATLNG=new google.maps.LatLng(49.79263519745814,15.410864203125016);this.INITIAL_ZOOM_LEVEL=8;this.INITIAL_LATLNG_BOUNDS=new google.maps.LatLngBounds(new google.maps.LatLng(48.14118844726973,10.796606390625016),new google.maps.LatLng(51.38963008032814,20.025122015625016));this.STREET_LEVEL_ZOOM=16;this.opts=e;this.callbacks={};this.googleMap=null;this.markers=null;this.mapCenter=null;this.mapZoom=null;this.tilesFirstLoaded=!1;this.viewportDirty=!1;this.markerManager=null;this.infoWindow=null;this.markerGridOverlay=null};ScukMap.view.Map.prototype={init:function(){var e=this,t={center:this.INITIAL_LATLNG,zoom:this.INITIAL_ZOOM_LEVEL,mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.LEFT_BOTTOM},mapTypeControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM},streetViewControl:!1,panControl:!1};this.googleMap=new google.maps.Map(document.getElementById(this.opts.id),t);this.mapCenter=this.googleMap.getCenter();this.mapZoom=this.googleMap.getZoom();this.markerGridOverlay=new ScukMap.view.MarkerGridOverlay;this.googleMap.overlayMapTypes.insertAt(0,this.markerGridOverlay);this.infoWindow=new ScukMap.view.CustomInfoWindow(this.googleMap);this.infoWindow.init();this.markerManager=new ScukMap.view.MarkerManager(this.googleMap,this.infoWindow);this.markerManager.callbacks.onInfoWindowChange=$.proxy(this.onInfoWindowChange,this);this.markerManager.init();google.maps.event.addListener(this.googleMap,"idle",function(t){log("idle");var n=e.googleMap.getBounds()?e.markerGridOverlay.computeVisibleTiles(e.googleMap):e.getInitialTiles();e.onViewPortUpdate(e.googleMap.getCenter(),e.googleMap.getZoom(),n);e.markerGridOverlay.clearTiles()});google.maps.event.addListener(this.googleMap,"tilesloaded",function(){if(!e.tilesFirstLoaded){e.tilesFirstLoaded=!0;if(e.viewportDirty){e.viewportDirty=!1;e.onViewPortUpdate(e.googleMap.getCenter(),e.googleMap.getZoom(),e.markerGridOverlay.computeVisibleTiles(e.googleMap))}}});var n=$(window);n.on("resize",function(){var t=n.width(),r=481,i={};if(t<r){i.mapTypeControl=!1;i.zoomControl=!1}else{i.mapTypeControl=!0;i.zoomControl=!0}e.googleMap.setOptions(i)});n.trigger("resize")},initDefault:function(){var e=this.getInitialTiles();this.onViewPortUpdate(this.INITIAL_LATLNG_BOUNDS,this.INITIAL_ZOOM_LEVEL)},addControls:function(e){this.googleMap.controls[google.maps.ControlPosition.TOP_LEFT].push(e)},onViewPortUpdate:function(e,t,n){if(!this.tilesFirstLoaded){this.viewportDirty=!0;return}this.callbacks.hasOwnProperty("onViewPortUpdate")&&this.callbacks.onViewPortUpdate.apply(this,[e,t,n])},updateData:function(e){this.markerManager.updateMarkers(e)},setViewPort:function(e,t){if(typeof t!="undefined"&&t)if(t instanceof google.maps.LatLngBounds)this.googleMap.fitBounds(t);else{this.googleMap.setCenter(e);this.googleMap.setZoom(t)}},openInfoWindow:function(e){this.markerManager.openInfoWindow(e)},closeInfoWindow:function(){this.infoWindow&&this.infoWindow.close()},onInfoWindowChange:function(e){this.callbacks.hasOwnProperty("onInfoWindowChange")&&this.callbacks.onInfoWindowChange.apply(this,[e])},getBounds:function(){return this.googleMap.getBounds()},getInitialTiles:function(){var e=135,t=142,n=85,r=88,i=[],s=e,o=n,u=t-e,a=r-n;for(var f=0;f<u;f++){for(var l=0;l<a;l++){var c=[s,o];i.push(c);s++}s=e;o++}return i}};ScukMap.view.View=function(e,t,n){var r=this;this.model=e;this.controller=t;this.opts=n;this.model.callbacks.onUpdateData=$.proxy(this.onUpdateData,this);this.map=new ScukMap.view.Map({id:n.mapId});this.map.callbacks.onViewPortUpdate=$.proxy(this.onViewPortUpdate,this);this.map.callbacks.onInfoWindowChange=$.proxy(this.onInfoWindowChange,this);this.userLocationControl=new ScukMap.view.UserLocationControl(this.opts);this.userLocationControl.callbacks.onClick=$.proxy(this.onUserLocationControlClick,this);this.autoComplete=new ScukMap.view.AutoComplete(this.opts);this.autoComplete.callbacks.onGeocodeResult=$.proxy(this.onGeocodeResult,this);this.typeSelector=new ScukMap.view.TypeSelector(this.opts);this.typeSelector.callbacks.onTypeChange=$.proxy(this.onTypeChange,this);this.hashNavigator=new ScukMap.view.HashNavigator;this.hashNavigator.callbacks.onHashChange=$.proxy(this.onHashChange,this)};ScukMap.view.View.prototype={init:function(){this.map.init();this.userLocationControl.init();this.autoComplete.init();this.typeSelector.init();this.hashNavigator.init();this.map.addControls(document.getElementById("controls"));var e=this.hashNavigator.getInitialState();e.hasOwnProperty("type")&&this.typeSelector.setType(e.type,!1);e.hasOwnProperty("marker")&&e.marker!=""&&this.map.openInfoWindow(e.marker);if(e.hasOwnProperty("lat")&&e.hasOwnProperty("lng")&&e.hasOwnProperty("z")){this.hashNavigator.lockHash=!0;var t=new google.maps.LatLng(e.lat,e.lng);this.map.setViewPort(t,parseInt(e.z))}else{ScukMap.utils.GeoUtil.getGeolocation($.proxy(this.onGeolocationResult,this),$.proxy(this.onGeolocationError,this));this.hashNavigator.lockHash=!0;this.map.initDefault()}},onViewPortUpdate:function(e,t,n){this.controller.updateViewPort(e,t,n);log("onviewportupdate");this.hashNavigator.lockHash?this.hashNavigator.lockHash=!1:this.hashNavigator.updateViewPort(e,t)},onUpdateData:function(e){this.map.updateData(e)},onUserLocationControlClick:function(e,t){this.map.setViewPort(e,t)},onGeocodeResult:function(e,t){var n=t;typeof n=="undefined"&&(n=this.map.STREET_LEVEL_ZOOM);this.map.setViewPort(e,n)},onGeolocationResult:function(e){var t=e.coords,n=new google.maps.LatLng(t.latitude,t.longitude),r=this.map.STREET_LEVEL_ZOOM;this.map.setViewPort(n,r);this.userLocationControl.enable(n,r)},onGeolocationError:function(e){log("onGeolocationError",e)},onTypeChange:function(e,t){this.controller.updateType(e,t);this.hashNavigator.updateType(e)},onHashChange:function(e,t){if(e.hasOwnProperty("lat")){var n=new google.maps.LatLng(e.lat,e.lng);this.map.setViewPort(n,parseInt(e.z))}e.hasOwnProperty("type")?this.typeSelector.setType(e.type,!0):this.typeSelector.setDefault();e.hasOwnProperty("marker")&&e.marker!=""?this.map.openInfoWindow(e.marker):this.map.closeInfoWindow()},onInfoWindowChange:function(e){this.hashNavigator.updateMarker(e)}};ScukMap.App=function(e){this.opts=e;this.view=null;this.controller=null;this.model=null};ScukMap.App.prototype={init:function(){this.model=new ScukMap.model.Model;this.controller=new ScukMap.controller.Controller(this.model);this.view=new ScukMap.view.View(this.model,this.controller,this.opts);this.controller.init();this.view.init()}};window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){var t=arguments,n;t.callee=t.callee.caller;n=[].slice.call(t);typeof console.log=="object"?log.apply.call(console.log,console,n):console.log.apply(console,n)}};(function(e){function t(){}for(var n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),r;!!(r=n.pop());)e[r]=e[r]||t})(function(){try{console.log();return window.console}catch(e){return window.console={}}}());(function(e){e.fn.hasScrollBar=function(){return e("html").hasClass("lt-ie9")?!1:this.get(0).scrollHeight>this.height()}})(jQuery);(function(e,t,n){var r={mapId:"map",userLocationControlId:"userLocationControl",autoCompleteId:"autoComplete",typeSelectorId:"typeSelector"},i=new ScukMap.App(r);i.init()})(jQuery,this);